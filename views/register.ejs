<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body
        {
            background-color: #212529;
            color: white;
        }
        #users
        {
            margin-top: 1%;
        }
    </style>
</head>
<body>
<div id="reg">
    <form class="register" action="reg" method="post" enctype="multipart/form-data" >
        <h1>Register</h1>
        <div class="form-group">
            <label >Username</label>
            <input type="text" class="form-control" name="username" placeholder="username" id="name" oninput="checkUsername()" required>
            <div id="show"></div>
        </div>
        <div class="form-group">
            <label >Email</label>
            <input type="email" class="form-control" name="Email" placeholder="username@gmail.com" required>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label >password</label>
                <input type="password" class="form-control" name="password" placeholder="password" required>
            </div>
            <div class="form-group col-md-6">
                <label>Confirm Password</label>
                <input type="password" class="form-control" name="password1" placeholder="password" required>
            </div>
        </div>
        <div class="form-group">
            <label >Phone Number</label>
            <input type="text" class="form-control" name="phonenumber" placeholder="010000000000">
        </div>

        <div class="form-group">
            <label>Upload cv</label>
            <div class="custom-file">
                <input type="file" class="custom-file-input" name="cv" required>
                <label class="custom-file-label" for="customFile">Choose file</label>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Sign in</button>
    </form>
</div>


<script>
    function checkUsername() {

        var name=document.getElementById("name").value
        var params={username:name}
        var xmlhttp =new XMLHttpRequest()
        xmlhttp.open("POST","http://localhost:3000/checkUsername",true)

        xmlhttp.setRequestHeader("Content-type","application/json;charset=UTF-8")
        xmlhttp.send(JSON.stringify(params))
        xmlhttp.onreadystatechange= function () {

            if (xmlhttp.readyState==4 && xmlhttp.status== 200)
            {
                document.getElementById("show").innerHTML= xmlhttp.responseText
            }
        }
    }

</script>

<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-3.2.1.min.js"></script>
</body>

</html>